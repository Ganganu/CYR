<UserControl
  x:Class="CYR.Dashboard.DashboardViews.DashboardInvoiceView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:converters="clr-namespace:CYR.Invoice.Resources.DataTemplates.Converters"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:irdt="clr-namespace:CYR.Invoice.Resources.DataTemplates"
  xmlns:local="clr-namespace:CYR.Dashboard.DashboardViews"
  xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:vm="clr-namespace:CYR.Dashboard.DashboardViewModels"
  d:DataContext="{d:DesignInstance Type=vm:DashboardInvoiceViewModel,
                                   IsDesignTimeCreatable=False}"
  d:DesignHeight="450"
  d:DesignWidth="800"
  mc:Ignorable="d">
  <UserControl.Resources>
    <converters:StateToBorderBrushConverter x:Key="StateToBorderBrushConverter" />
    <irdt:InvoiceListViewInvoiceStateTemplateSelector
      x:Key="StateTemplateSelector"
      ClosedTemplate="{StaticResource ClosedTemplate}"
      OpenTemplate="{StaticResource OpenTemplate}" />
  </UserControl.Resources>

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Grid Grid.Row="0" Margin="5,5,5,5">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="150" />
      </Grid.ColumnDefinitions>
      <Button
        Grid.Column="0"
        Command="{Binding NavigateToInvoiceListCommand}"
        Content="Rechnungsvollübersicht" />
      <Button
        Grid.Column="1"
        Margin="5,0,0,0"
        Command="{Binding NavigateToCreateInvoiceCommand}"
        Cursor="Hand">
        <Button.Content>
          <StackPanel Orientation="Horizontal">
            <materialDesign:PackIcon
              Margin="0,0,5,0"
              VerticalAlignment="Center"
              Kind="PlusCircleOutline"
              ToolTip="Neue Rechnung erstellen" />
            <TextBlock VerticalAlignment="Top" Text="Rechnung" />
          </StackPanel>
        </Button.Content>
      </Button>
    </Grid>


    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
      <ItemsControl ItemsSource="{Binding InvoiceModels}">
        <ItemsControl.Resources>
          <Style TargetType="ContentPresenter">
            <Setter Property="RenderTransform">
              <Setter.Value>
                <TranslateTransform Y="0" />
              </Setter.Value>
            </Setter>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5" />
            <Style.Triggers>
              <Trigger Property="IsMouseOver" Value="True">
                <Trigger.EnterActions>
                  <BeginStoryboard>
                    <Storyboard>
                      <DoubleAnimation
                        Storyboard.TargetProperty="RenderTransform.(TranslateTransform.Y)"
                        To="-5"
                        Duration="0:0:0.1" />
                    </Storyboard>
                  </BeginStoryboard>
                </Trigger.EnterActions>
                <Trigger.ExitActions>
                  <BeginStoryboard>
                    <Storyboard>
                      <DoubleAnimation
                        Storyboard.TargetProperty="RenderTransform.(TranslateTransform.Y)"
                        To="0"
                        Duration="0:0:0.1" />
                    </Storyboard>
                  </BeginStoryboard>
                </Trigger.ExitActions>
              </Trigger>
            </Style.Triggers>
          </Style>
        </ItemsControl.Resources>
        <ItemsControl.ItemTemplate>
          <DataTemplate>
            <Border
              Margin="5"
              BorderBrush="Orange"
              BorderThickness="1"
              CornerRadius="10">
              <Grid>
                <Grid.RowDefinitions>
                  <RowDefinition Height="*" />
                  <RowDefinition Height="*" />
                  <RowDefinition Height="*" />
                  <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Grid Grid.Row="0">
                  <Label
                    Margin="5,0,0,3"
                    Content="{Binding InvoiceNumber}"
                    FontSize="18"
                    Foreground="Black" />
                </Grid>
                <Grid Grid.Row="1">
                  <Label
                    Margin="5,0,0,0"
                    Content="{Binding Customer.Name}"
                    FontSize="16"
                    Foreground="Gray" />
                </Grid>
                <Grid Grid.Row="2">
                  <TextBlock
                    Margin="5,0,0,0"
                    FontSize="24"
                    FontWeight="Black"
                    Foreground="Orange"
                    Text="{Binding GrossAmount, StringFormat={}{0:N2}€}" />
                </Grid>
                <Grid Grid.Row="3" Margin="5,7,0,10">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                  </Grid.ColumnDefinitions>
                  <ContentControl
                    Grid.Column="0"
                    HorizontalAlignment="Left"
                    Content="{Binding}"
                    ContentTemplateSelector="{StaticResource StateTemplateSelector}" />
                  <TextBlock
                    Grid.Column="1"
                    VerticalAlignment="Bottom"
                    FontSize="13"
                    Foreground="Gray"
                    Text="{Binding IssueDate, StringFormat={}{0:d}}" />
                </Grid>
              </Grid>
            </Border>
          </DataTemplate>
        </ItemsControl.ItemTemplate>

      </ItemsControl>
    </ScrollViewer>

    <!--<DataGrid
      Grid.Row="1"
      AutoGenerateColumns="False"
      Background="Transparent"
      BorderBrush="LightGray"
      CanUserAddRows="False"
      IsReadOnly="True"
      ItemsSource="{Binding InvoiceModels}">
      <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding InvoiceNumber}" Header="Rechnungsnummer" />
        <DataGridTextColumn Binding="{Binding Customer.Name}" Header="Kunde" />
        <DataGridTextColumn Binding="{Binding GrossAmount, StringFormat={}{0:N2} €}" Header="Brutto" />
        <DataGridTemplateColumn Header="Status">
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <Ellipse
                Width="10"
                Height="10"
                Fill="{Binding State, Converter={StaticResource StateToBorderBrushConverter}}" />
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTextColumn Binding="{Binding IssueDate, StringFormat={}{0:d}}" Header="Datum" />
      </DataGrid.Columns>
    </DataGrid>-->
  </Grid>
</UserControl>
