<Window
  x:Class="CYR.Login.LoginView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:local="clr-namespace:CYR.Login"
  xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  Title="LoginView"
  Width="900"
  Height="700"
  d:DataContext="{d:DesignInstance Type=local:LoginViewModel,
                                   IsDesignTimeCreatable=False}"
  AllowsTransparency="True"
  Background="Transparent"
  FontFamily="{DynamicResource MaterialDesignFont}"
  FontSize="18"
  Loaded="Window_Loaded"
  WindowStartupLocation="CenterScreen"
  WindowStyle="None"
  mc:Ignorable="d">
  <Window.Resources>
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />

  </Window.Resources>
  <Window.Visibility>
    <Binding
      Converter="{StaticResource BooleanToVisibilityConverter}"
      Mode="TwoWay"
      Path="IsViewVisible" />
  </Window.Visibility>
  <Border x:Name="borderTop" Background="#fcfcfc">
    <Border.InputBindings>
      <KeyBinding
        Key="Enter"
        Command="{Binding LoginCommand}"
        CommandParameter="{Binding}" />
    </Border.InputBindings>
    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>
      <Grid.RowDefinitions>
        <RowDefinition Height="35" />
        <RowDefinition Height="*" />
      </Grid.RowDefinitions>
      <Grid
        Grid.Row="0"
        Grid.Column="0"
        Grid.ColumnSpan="2">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="60" />
        </Grid.ColumnDefinitions>
        <Border
          x:Name="bTop"
          Background="Transparent"
          BorderBrush="Transparent"
          CornerRadius="20"
          PreviewMouseLeftButtonDown="bTop_PreviewMouseLeftButtonDown" />
        <materialDesign:PackIcon
          Grid.Column="1"
          HorizontalAlignment="Center"
          VerticalAlignment="Center"
          Kind="Close"
          Opacity=".5" />
        <Border
          x:Name="bButton"
          Grid.Column="1"
          CornerRadius="20">
          <Button x:Name="btnExit" Click="btnExit_Click">
            <Button.Style>
              <Style BasedOn="{StaticResource MaterialDesignFlatButton}" TargetType="Button">
                <Style.Triggers>
                  <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="Transparent" />
                    <Setter Property="Opacity" Value="0" />
                  </Trigger>
                </Style.Triggers>
              </Style>
            </Button.Style>
          </Button>
        </Border>
      </Grid>
      <Grid
        Grid.Row="0"
        Grid.RowSpan="2"
        Grid.ColumnSpan="2">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Grid Grid.Column="0">
          <Grid.RowDefinitions>
            <RowDefinition Height="100" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
          </Grid.RowDefinitions>
          <Path
            Grid.Row="0"
            Grid.RowSpan="4"
            Stretch="Fill">
            <Path.Fill>
              <LinearGradientBrush StartPoint="1 1" EndPoint="1 0">
                <GradientStop Offset="0.0" Color="#303030" />
                <GradientStop Offset="1" Color="#1d212d" />
              </LinearGradientBrush>
            </Path.Fill>
            <Path.Data>
              <PathGeometry>
                <PathFigure IsClosed="True" StartPoint="0,0">
                  <LineSegment Point="0.6,0" />
                  <BezierSegment
                    Point1="0.85,0"
                    Point2="1.0,0.2"
                    Point3="0.95,0.4" />
                  <BezierSegment
                    Point1="0.9,0.6"
                    Point2="0.85,0.8"
                    Point3="0.6,1.0" />
                  <LineSegment Point="0,1" />
                  <LineSegment Point="0,0" />
                </PathFigure>
              </PathGeometry>
            </Path.Data>
          </Path>
          <StackPanel
            Grid.Row="1"
            Margin="0,40,200,0"
            HorizontalAlignment="Center"
            Orientation="Horizontal">
            <Path
              Grid.Row="1"
              Width="100"
              Height="100"
              Data="m 748.03998,223.71505 c -4.51656,0.83847 -9.34853,4.36121 -13.44,6.40695 l -26.87999,13.44 -88.32,44.16 -29.44,14.71998 c -3.03461,1.5173 -9.69943,3.39724 -11.13383,6.69431 -1.72263,3.95961 -0.38617,10.93725 -0.38617,15.22371 v 34.56 120.96 38.4 c 0,3.91215 -1.49291,11.73861 0.65778,15.11011 1.45171,2.27578 5.34351,3.4125 7.66222,4.57186 l 18.56,9.27605 70.4,35.19998 53.76,26.88 c 4.95332,2.47668 14.88335,10.00586 20.47999,8.96692 4.51653,-0.8384 9.34856,-4.36118 13.44,-6.40692 l 26.88,-13.44 88.32,-44.16 29.44,-14.71998 c 3.03461,-1.51732 9.69945,-3.39726 11.13383,-6.69431 1.72262,-3.95961 0.38617,-10.93727 0.38617,-15.22371 v -34.56 -120.96 -38.4 c 0,-3.91215 1.49289,-11.73861 -0.65777,-15.11011 -1.45172,-2.27578 -5.34352,-3.4125 -7.66223,-4.57186 l -18.56,-9.27605 -70.4,-35.19998 -53.76,-26.88 c -4.95328,-2.47664 -14.88339,-10.00594 -20.48,-8.96695 m 1.28,8.50273 c 3.56674,0.24125 7.72821,3.36832 10.88,4.94422 l 25.6,12.8 88.32,44.15998 28.16,14.08 c 2.78672,1.39336 8.52832,3.00754 9.85383,6.05431 1.59176,3.65875 0.38617,9.98963 0.38617,13.94371 v 33.28 115.84 36.48 c 0,3.77332 1.42028,11.21248 -0.65777,14.47011 -1.45172,2.27582 -5.34352,3.4125 -7.66223,4.57186 l -18.56,9.27605 -69.12,34.55998 -48.64,24.32 c -4.90269,2.45137 -13.66248,9.15879 -19.2,8.78422 -3.56669,-0.24129 -7.72822,-3.36832 -10.88,-4.94422 l -25.59999,-12.8 -88.32,-44.15998 -28.16,-14.08 c -2.78674,-1.39337 -8.52831,-3.00752 -9.85383,-6.05431 -1.59175,-3.65875 -0.38617,-9.98963 -0.38617,-13.94371 V 480.52 364.68 328.2 c 0,-3.77334 -1.42029,-11.21244 0.65778,-14.47011 1.45169,-2.27575 5.34352,-3.4125 7.66222,-4.57186 l 18.56,-9.27605 69.12,-34.55998 48.64,-24.32 c 4.90271,-2.45137 13.66248,-9.15879 19.19999,-8.78422 m -1.28,11.93777 c -7.10548,1.60914 -14.60785,7.03039 -21.11999,10.28645 l -43.52,21.76 c -1.91144,0.9557 -4.20048,2.58457 -6.4,2.63308 -4.32103,0.0953 -7.04094,-3.11941 -11.51013,-0.49781 -4.0502,2.37582 -2.93601,6.93695 -5.97284,9.56445 -5.78098,5.00176 -15.35661,7.92004 -22.19703,11.34026 l -29.44,14.72 c -3.03459,1.51728 -9.69944,3.39726 -11.13383,6.69431 -1.52617,3.50801 -0.38617,9.51606 -0.38617,13.30371 v 31.36 108.16 34.56 c 0,3.49465 -1.27415,10.16156 0.65777,13.19011 2.57594,4.03817 11.7647,6.61914 15.98223,8.72791 l 42.24,21.11998 c 6.04069,3.02407 5.21351,9.53461 10.88247,12.27559 5.21303,2.52051 9.47255,-2.0357 14.71753,0.52543 16.92958,8.26664 33.70884,16.85738 50.56,25.28297 4.73797,2.36898 13.80472,9.26429 19.19999,8.04246 12.5811,-2.84922 26.20377,-12.82832 37.76,-18.60645 9.57493,-4.78742 19.35082,-11.06363 29.44,-14.62715 3.64676,-1.28804 7.14676,1.18657 10.87754,-0.61726 3.83871,-1.85606 3.90069,-6.15109 7.12789,-8.3684 8.00975,-5.5033 18.09826,-9.15902 26.79457,-13.50717 l 28.8,-14.39605 c 2.90985,-1.45492 9.11463,-3.20811 10.49383,-6.37826 1.52619,-3.50803 0.38617,-9.51606 0.38617,-13.30371 V 476.04 367.88 333.32 c 0,-3.49461 1.27414,-10.16154 -0.65777,-13.19011 -1.35981,-2.1317 -4.85567,-3.16463 -7.02223,-4.24791 l -16.64,-8.32 c -13.72515,-6.86258 -28.42443,-12.91569 -41.56494,-20.83159 -3.59387,-2.16496 -3.72806,-6.79507 -7.71752,-8.72398 -4.08426,-1.97473 -8.05638,0.70156 -12.15754,-1.1768 -16.663,-7.63179 -32.88627,-16.43472 -49.28,-24.6316 -4.73796,-2.36898 -13.80474,-9.26429 -19.2,-8.04246 m 68.48,39.24445 c -1.16697,5.38309 2.81668,11.85182 8.96,11.2494 3.73452,-0.36621 5.69684,-3.77736 9.6,-2.10914 15.47481,6.61398 30.38473,15.17408 45.44,22.70172 3.79961,1.8998 13.75567,4.77763 15.61383,8.72791 1.84488,3.92207 0.38617,11.44494 0.38617,15.75011 v 38.4 92.16 c 0,14.93082 1.33504,30.55131 -0.0375,45.41234 -0.49222,5.32941 -13.55638,9.22658 -17.88248,11.38963 l -30.08,15.03605 c -4.59609,2.29805 -9.73377,5.94823 -14.72,7.20246 -3.83705,0.96518 -6.62822,-3.57878 -10.88,-2.35654 -4.93027,1.41731 -7.43761,6.20961 -6.4,10.99606 -15.17607,8.85777 -31.64023,15.97812 -47.36,23.838 -5.33888,2.66946 -13.80966,9.16942 -19.84,9.16942 -6.03033,0 -14.50112,-6.49996 -19.83999,-9.16942 -15.84149,-7.92074 -33.74803,-14.63711 -48.54569,-24.34761 -3.97318,-2.60731 -3.07877,-8.24625 -8.41431,-10.27311 -3.7616,-1.42894 -6.68508,1.85824 -10.24,0.8726 -14.49925,-4.02012 -29.40023,-14.55195 -42.88,-21.29186 -4.04228,-2.02115 -14.92617,-5.18482 -16.89383,-9.36791 -1.50814,-3.20617 -0.38617,-9.04888 -0.38617,-12.55011 v -30.08 -105.6 -33.28 c 0,-3.19802 -1.235,-9.68097 0.65778,-12.39211 2.74484,-3.9316 11.73374,-6.44562 15.98222,-8.56986 13.6787,-6.83935 28.80745,-17.52863 43.52,-21.60791 3.55491,-0.98564 6.4784,2.30156 10.24,0.8726 5.33554,-2.02688 4.44112,-7.6658 8.41431,-10.27311 14.79766,-9.71054 32.70424,-16.42687 48.54569,-24.34761 5.3389,-2.66946 13.80964,-9.16942 19.83999,-9.16942 6.03034,0 14.50112,6.49996 19.84,9.16942 15.71981,7.85992 32.18387,14.98031 47.36,23.838 m -68.48,-21.28496 c -10.68272,1.98317 -22.90522,11.13957 -32.63999,16.00696 l -70.4,35.19998 -24.32,12.16 c -2.5323,1.26615 -7.36218,2.62925 -8.57383,5.41431 -1.39468,3.20576 -0.38617,8.56951 -0.38617,12.02371 v 27.52 97.28 30.72 c 0,3.35463 -1.20053,9.63695 0.65778,12.55011 3.24114,5.08098 15.74553,8.60957 21.10222,11.28791 l 56.32,28.15998 43.52,21.76 c 4.19666,2.09836 11.84369,7.93731 16.63999,7.04692 10.68266,-1.98305 22.9053,-11.13953 32.64,-16.00692 l 70.4,-35.19998 24.32,-12.16 c 2.53233,-1.26615 7.36219,-2.62927 8.57383,-5.41431 1.39467,-3.20574 0.38617,-8.56953 0.38617,-12.02371 v -27.52 -97.28 -30.72 c 0,-3.35463 1.20053,-9.63695 -0.65777,-12.55011 -3.24115,-5.081 -15.74553,-8.60957 -21.10223,-11.28791 L 808.2,290.922 764.68,269.162 c -4.19662,-2.09832 -11.84375,-7.93735 -16.64,-7.04696 m 1.28,8.50274 c 3.18737,0.21558 6.79038,2.89941 9.6,4.30422 l 20.48,10.24 69.12,34.55998 22.4,11.19605 c 2.4002,1.2001 6.78295,2.45291 7.93383,5.09826 1.32867,3.05404 0.38617,8.09668 0.38617,11.38371 v 26.24 91.52 29.44 c 0,3.07277 1.0518,8.59011 -0.65777,11.27011 -3.24115,5.08098 -15.74555,8.60957 -21.10223,11.28791 l -55.04,27.52 -38.4,19.19998 c -4.03511,2.01758 -10.76617,7.17496 -15.36,6.86422 -3.18738,-0.21562 -6.79037,-2.89941 -9.6,-4.30422 l -20.47999,-10.24 -69.12,-34.55998 -22.4,-11.19605 c -2.40019,-1.2001 -6.78297,-2.45295 -7.93383,-5.09826 -1.32868,-3.05406 -0.38617,-8.09668 -0.38617,-11.38371 V 467.72 376.2 346.76 c 0,-3.07279 -1.05179,-8.59011 0.65778,-11.27011 3.24115,-5.08098 15.74552,-8.60957 21.10222,-11.28791 l 55.04,-27.52 38.4,-19.19998 c 4.03512,-2.01758 10.76615,-7.17496 15.35999,-6.86422 m -3.84,7.66222 -0.38566,13.44 -4.63952,9.6 4.98767,10.88 0.0375,69.76 h 7.04 l 0.0375,-69.76 4.98766,-10.88 -4.63951,-9.6 -0.38567,-13.44 h -7.04 m -33.91999,14.08 v 74.88 h 7.04 v -74.88 h -7.04 m 67.83999,0.64 v 74.88 h 7.04 V 293 h -7.04 m -31.35011,3.50569 c 5.77785,-1.26063 7.69851,7.72355 1.90023,8.98863 -5.77791,1.26062 -7.69849,-7.72355 -1.90023,-8.98863 M 737.15998,413.96 h -25.59999 v 10.88 h 12.16 c 0,3.00051 1.09293,8.6824 -0.65779,11.24297 -4.18207,6.11658 -17.23503,0.30201 -20.66666,-3.67408 -5.23169,-6.06174 -5.55607,-16.39633 -2.59012,-23.56889 3.86144,-9.33814 14.25694,-11.37842 23.27457,-9.959 2.53759,0.39943 6.88156,2.76668 9.33234,1.83306 2.61684,-0.99687 3.92548,-7.36373 4.74765,-9.79406 -7.40254,-2.40785 -14.56999,-4.02248 -22.39999,-3.83062 -9.12199,0.22351 -18.20694,3.55677 -23.98865,10.87111 -11.20872,14.17996 -9.71051,40.99513 8.62865,48.62814 8.60527,3.58164 19.89659,3.8293 28.8,1.15803 2.64353,-0.79315 7.87042,-2.12758 8.75654,-5.12295 2.41172,-8.15244 0.20345,-20.1418 0.20345,-28.66371 m 69.76,0 h -25.6 v 10.88 c 2.9035,0 8.17612,-1.01076 10.67655,0.65777 2.43328,1.62373 2.35789,9.74651 0,11.39703 -4.02047,2.81432 -11.17756,1.22233 -15.15655,-0.77677 -12.74296,-6.40227 -12.07087,-28.71594 4.9e-4,-35.37285 8.72848,-4.81344 17.33256,-0.36186 26.23951,0.41482 l 3.84,-10.24 c -7.43824,-2.41947 -14.54623,-3.93098 -22.4,-3.83754 -9.73869,0.11586 -19.31232,4.08324 -25.09531,12.15754 -10.54142,14.71809 -7.87375,40.50262 10.37531,47.70271 8.65664,3.41545 20.00801,3.37614 28.8,0.50766 2.54504,-0.83035 7.24961,-1.89613 8.11655,-4.82666 2.41172,-8.15242 0.20345,-20.14182 0.20345,-28.66371 m -61.44,46.08 -0.0375,69.11754 -5.62767,10.88246 5.27901,9.65728 0.38617,14.02272 h 7.68 l -0.2563,-14.72 4.00148,-8.96 -4.34766,-10.24 -0.0375,-69.76 h -7.04 m -33.91999,14.08 V 549 h 7.04 v -74.88 h -7.04 m 67.83999,0.64 v 74.88 h 7.04 v -74.88 h -7.04 m -31.99011,61.10568 c 5.77787,-1.26062 7.69851,7.72355 1.90023,8.98863 -5.77785,1.26063 -7.69851,-7.72355 -1.90023,-8.98863 z"
              Fill="White"
              Stretch="Uniform" />
            <TextBlock
              Margin="10,0,0,0"
              VerticalAlignment="Center"
              Foreground="white"
              Text="CYR" />
          </StackPanel>

          <StackPanel Grid.Row="2" HorizontalAlignment="Center">
            <TextBlock
              FontSize="21"
              Foreground="white"
              Text="Erstelle deine Rechnung mit CYR!" />
          </StackPanel>
        </Grid>
      </Grid>
      <Grid Grid.Row="1" Grid.Column="1">
        <Grid.RowDefinitions>
          <RowDefinition Height="70" />
          <RowDefinition Height="*" />
          <RowDefinition Height="70" />
        </Grid.RowDefinitions>
        <Grid Grid.Row="1" Margin="20,0,20,0">
          <Grid x:Name="LoginGrid">
            <Grid.Style>
              <Style TargetType="Grid">
                <Setter Property="Visibility" Value="Visible" />
                <Style.Triggers>
                  <DataTrigger Binding="{Binding IsRegistering}" Value="True">
                    <Setter Property="Visibility" Value="Collapsed" />
                  </DataTrigger>
                </Style.Triggers>
              </Style>
            </Grid.Style>
            <Grid>
              <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
              </Grid.RowDefinitions>
              <TextBlock
                Grid.Row="0"
                Margin="0,20,0,0"
                HorizontalAlignment="Center"
                Foreground="#aeadb2"
                Text="Jetzt anmelden, um zu starten." />
              <StackPanel Grid.Row="1" Margin="20,100,20,0">
                <TextBox
                  x:Name="txtusername"
                  Grid.Column="1"
                  Margin="0,0,0,10"
                  materialDesign:HintAssist.Foreground="Black"
                  materialDesign:HintAssist.Hint="Benutzername"
                  materialDesign:HintAssist.IsFloating="False"
                  Background="#f3f6fb"
                  BorderThickness="0.5"
                  Style="{StaticResource MaterialDesignOutlinedTextBox}"
                  Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}" />
                <PasswordBox
                  Grid.Column="1"
                  Margin="0,0,0,10"
                  materialDesign:HintAssist.Foreground="Black"
                  materialDesign:HintAssist.Hint="Passwort"
                  materialDesign:HintAssist.IsFloating="False"
                  materialDesign:PasswordBoxAssist.Password="{Binding Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                  Background="#f3f6fb"
                  BorderThickness="0.5"
                  Style="{StaticResource MaterialDesignOutlinedPasswordBox}" />
                <Grid>
                  <CheckBox
                    Content="Angemeldet bleiben"
                    FontSize="15"
                    Foreground="#aeadb2"
                    IsChecked="{Binding IsStayLoggedInChecked, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                  <Button
                    HorizontalAlignment="Right"
                    Command="{Binding CreateUserCommand}"
                    Content="Konto erstellen"
                    Style="{StaticResource MaterialDesignFlatButton}" />
                </Grid>

                <TextBlock
                  Margin="0,10,0,0"
                  FontSize="13"
                  Foreground="Red"
                  Text="{Binding LoginError}" />
              </StackPanel>
              <Grid Grid.Row="2">
                <Button
                  Height="40"
                  Margin="20,100,20,0"
                  Command="{Binding LoginCommand}"
                  CommandParameter="{Binding}"
                  Content="Anmelden" />
              </Grid>
            </Grid>
          </Grid>
          <Grid x:Name="RegisterGrid">
            <Grid.Style>
              <Style TargetType="Grid">
                <Setter Property="Visibility" Value="Collapsed" />
                <Style.Triggers>
                  <DataTrigger Binding="{Binding IsRegistering}" Value="True">
                    <Setter Property="Visibility" Value="Visible" />
                  </DataTrigger>
                </Style.Triggers>
              </Style>
            </Grid.Style>
            <Grid>
              <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
              </Grid.RowDefinitions>
              <TextBlock
                Grid.Row="0"
                Margin="0,20,0,0"
                HorizontalAlignment="Center"
                Foreground="#aeadb2"
                Text="Neues Konto erstellen" />
              <StackPanel Grid.Row="1" Margin="20,100,20,0">
                <TextBox
                  Grid.Column="1"
                  Margin="0,0,0,10"
                  materialDesign:HintAssist.Foreground="Black"
                  materialDesign:HintAssist.Hint="Benutzername"
                  materialDesign:HintAssist.IsFloating="False"
                  Background="#f3f6fb"
                  BorderThickness="0.5"
                  Style="{StaticResource MaterialDesignOutlinedTextBox}"
                  Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}" />
                <PasswordBox
                  Grid.Column="1"
                  Margin="0,0,0,10"
                  materialDesign:HintAssist.Foreground="Black"
                  materialDesign:HintAssist.Hint="Passwort"
                  materialDesign:HintAssist.IsFloating="False"
                  materialDesign:PasswordBoxAssist.Password="{Binding Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                  Background="#f3f6fb"
                  BorderThickness="0.5"
                  Style="{StaticResource MaterialDesignOutlinedPasswordBox}" />
                <TextBlock
                  Margin="0,10,0,0"
                  FontSize="13"
                  Foreground="Red"
                  Text="{Binding LoginError}" />
              </StackPanel>
              <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="2*" />
                  <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Button
                  Grid.Column="0"
                  Height="40"
                  Margin="20,100,0,0"
                  Command="{Binding LoginCommand}"
                  CommandParameter="{Binding}"
                  Content="Konto erstellen" />
                <Button
                  Grid.Column="1"
                  Height="40"
                  Margin="5,100,20,0" Style="{StaticResource MaterialDesignFlatButton}"
                  Command="{Binding LoginCommand}"
                  CommandParameter="{Binding}"
                  Content="Abbrechen" />
              </Grid>
            </Grid>

          </Grid>
        </Grid>
      </Grid>
    </Grid>
  </Border>
</Window>
