<ResourceDictionary
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:local="clr-namespace:DropDownMenuControl">
  <Style TargetType="{x:Type local:DropDownMenu}">
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type local:DropDownMenu}">
          <Grid>
            <CheckBox IsChecked="{Binding IsOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}">
              <CheckBox.Template>
                <ControlTemplate>
                  <Border Background="Transparent">
                    <Grid>
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                      </Grid.ColumnDefinitions>
                      <TextBlock
                        Grid.Column="0"
                        Margin="0,0,10,0"
                        VerticalAlignment="Center"
                        Text="Status auswaehlen" />
                      <Grid Grid.Column="1">
                        <Viewbox>
                          <Path
                            Width="10"
                            Height="5"
                            VerticalAlignment="Center"
                            Data="M480-360 280-560h400L480-360Z"
                            Fill="Black"
                            Stretch="Fill" />
                        </Viewbox>
                      </Grid>
                    </Grid>
                  </Border>
                </ControlTemplate>
              </CheckBox.Template>
            </CheckBox>
            <Popup
              IsOpen="{TemplateBinding IsOpen}"
              Placement="Bottom"
              StaysOpen="False" AllowsTransparency="True">
              <Border Width="{Binding ActualWidth, RelativeSource={RelativeSource TemplatedParent}}">
                <ContentControl Content="{TemplateBinding Content}" />
              </Border>
            </Popup>
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ResourceDictionary>
